<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Memory Decay - Interactive Demo</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: #0a1628;
      min-height: 100vh;
      padding: 40px 20px;
      color: rgba(200, 215, 235, 0.95);
      position: relative;
      transition: background 0.5s ease, color 0.5s ease;
    }

    /* Calm ocean waves - dark mode */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 0;
      pointer-events: none;
      background:
        radial-gradient(ellipse 120% 15% at 50% 95%, rgba(20, 35, 55, 0.4) 0%, transparent 70%),
        radial-gradient(ellipse 100% 12% at 30% 90%, rgba(25, 40, 60, 0.3) 0%, transparent 60%),
        radial-gradient(ellipse 90% 10% at 70% 92%, rgba(22, 38, 58, 0.35) 0%, transparent 65%),
        radial-gradient(ellipse 150% 8% at 40% 85%, rgba(18, 32, 50, 0.25) 0%, transparent 55%),
        radial-gradient(ellipse 130% 6% at 60% 88%, rgba(20, 34, 52, 0.2) 0%, transparent 50%),
        radial-gradient(ellipse 200% 4% at 50% 80%, rgba(30, 50, 75, 0.15) 0%, transparent 40%);
      animation: dark-waves 20s ease-in-out infinite;
    }

    @keyframes dark-waves {
      0%, 100% { opacity: 1; transform: translateY(0); }
      25% { opacity: 0.9; transform: translateY(2px); }
      50% { opacity: 1; transform: translateY(-1px); }
      75% { opacity: 0.95; transform: translateY(1px); }
    }

    body::after {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 0;
      pointer-events: none;
      background:
        radial-gradient(ellipse 100% 8% at 25% 93%, rgba(15, 28, 45, 0.3) 0%, transparent 50%),
        radial-gradient(ellipse 80% 6% at 75% 91%, rgba(18, 30, 48, 0.25) 0%, transparent 45%),
        radial-gradient(ellipse 120% 5% at 55% 87%, rgba(12, 25, 42, 0.2) 0%, transparent 40%);
      animation: dark-waves-2 15s ease-in-out infinite;
    }

    @keyframes dark-waves-2 {
      0%, 100% { opacity: 0.8; transform: translateX(0); }
      33% { opacity: 1; transform: translateX(-3px); }
      66% { opacity: 0.85; transform: translateX(2px); }
    }

    /* Light mode */
    body.light-mode {
      background: linear-gradient(135deg, #f0f4f8 0%, #e8f0f8 50%, #f5f8fc 100%);
      color: #2a4a6a;
    }

    body.light-mode::before,
    body.light-mode::after {
      display: none;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      position: relative;
      z-index: 1;
    }

    header {
      text-align: center;
      margin-bottom: 40px;
      position: relative;
    }

    h1 {
      font-size: 3em;
      margin-bottom: 10px;
      font-weight: 700;
      background: radial-gradient(circle at 50% 50%,
        rgba(160, 200, 255, 0.95) 0%,
        rgba(120, 170, 230, 0.85) 40%,
        rgba(100, 150, 210, 0.75) 70%,
        rgba(80, 130, 190, 0.6) 100%);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 6px 18px rgba(160, 200, 255, 0.4);
    }

    body.light-mode h1 {
      background: linear-gradient(135deg, #4a90e2, #357abd);
      -webkit-background-clip: text;
      background-clip: text;
      text-shadow: 0 2px 8px rgba(74, 144, 226, 0.2);
    }

    .subtitle {
      font-size: 1.3em;
      opacity: 0.8;
      font-weight: 300;
    }

    .theme-toggle {
      position: absolute;
      top: 0;
      right: 0;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: rgba(200, 215, 235, 0.95);
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 0.9em;
      transition: all 0.3s;
    }

    .theme-toggle:hover {
      background: rgba(255, 255, 255, 0.15);
    }

    body.light-mode .theme-toggle {
      background: rgba(74, 144, 226, 0.1);
      border-color: rgba(74, 144, 226, 0.3);
      color: #2a4a6a;
    }

    .intro {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(10px);
      padding: 30px;
      border-radius: 16px;
      margin-bottom: 30px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    body.light-mode .intro {
      background: rgba(255, 255, 255, 0.7);
      border-color: rgba(100, 150, 200, 0.2);
    }

    .intro h2 {
      margin-bottom: 15px;
      color: rgba(160, 200, 255, 0.95);
    }

    body.light-mode .intro h2 {
      color: #4a90e2;
    }

    .intro p {
      line-height: 1.6;
      opacity: 0.9;
      margin-bottom: 10px;
    }

    .controls {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(10px);
      padding: 25px;
      border-radius: 16px;
      margin-bottom: 30px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      align-items: center;
    }

    body.light-mode .controls {
      background: rgba(255, 255, 255, 0.7);
      border-color: rgba(100, 150, 200, 0.2);
    }

    button {
      background: rgba(100, 160, 220, 0.25);
      color: rgba(200, 215, 235, 0.95);
      border: 1px solid rgba(100, 160, 220, 0.3);
      padding: 12px 24px;
      border-radius: 10px;
      font-size: 1em;
      cursor: pointer;
      transition: all 0.2s;
      font-weight: 500;
    }

    button:hover {
      background: rgba(100, 160, 220, 0.35);
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(100, 160, 220, 0.3);
    }

    button:active {
      transform: translateY(0);
    }

    body.light-mode button {
      background: linear-gradient(135deg, #a8c8e8, #90b8d8);
      color: #2a4a6a;
      border: none;
    }

    body.light-mode button:hover {
      background: linear-gradient(135deg, #98b8d8, #80a8c8);
    }

    button.secondary {
      background: rgba(110, 190, 130, 0.25);
      border-color: rgba(110, 190, 130, 0.3);
    }

    button.secondary:hover {
      background: rgba(110, 190, 130, 0.35);
    }

    body.light-mode button.secondary {
      background: linear-gradient(135deg, #9ae6b4, #68d391);
    }

    .time-display {
      font-size: 1.1em;
      font-weight: 600;
      color: rgba(160, 200, 255, 0.95);
      padding: 12px 20px;
      background: rgba(100, 160, 220, 0.15);
      border-radius: 10px;
      margin-left: auto;
    }

    body.light-mode .time-display {
      color: #4a90e2;
      background: rgba(100, 160, 220, 0.2);
    }

    .memories-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }

    .memory-card {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      padding: 24px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }

    .memory-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 30px rgba(100, 160, 220, 0.2);
      border-color: rgba(255, 255, 255, 0.2);
    }

    body.light-mode .memory-card {
      background: rgba(255, 255, 255, 0.9);
      border-color: rgba(100, 150, 200, 0.2);
    }

    body.light-mode .memory-card:hover {
      box-shadow: 0 8px 30px rgba(0,0,0,0.12);
    }

    .memory-type {
      display: inline-block;
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 0.75em;
      font-weight: 700;
      text-transform: uppercase;
      margin-bottom: 12px;
      letter-spacing: 0.8px;
    }

    .type-fact { background: rgba(100, 150, 200, 0.25); color: rgba(160, 200, 255, 0.95); }
    .type-preference { background: rgba(255, 180, 100, 0.25); color: rgba(255, 200, 140, 0.95); }
    .type-goal { background: rgba(110, 190, 130, 0.25); color: rgba(150, 230, 170, 0.95); }
    .type-event { background: rgba(220, 120, 160, 0.25); color: rgba(255, 170, 200, 0.95); }
    .type-context { background: rgba(160, 120, 220, 0.25); color: rgba(200, 170, 255, 0.95); }

    body.light-mode .type-fact { background: #bee3f8; color: #2c5282; }
    body.light-mode .type-preference { background: #fbd38d; color: #744210; }
    body.light-mode .type-goal { background: #9ae6b4; color: #22543d; }
    body.light-mode .type-event { background: #fbb6ce; color: #702459; }
    body.light-mode .type-context { background: #d6bcfa; color: #44337a; }

    .memory-content {
      font-size: 1.1em;
      margin-bottom: 16px;
      line-height: 1.5;
    }

    .confidence-bar {
      height: 8px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 4px;
      overflow: hidden;
      margin-bottom: 12px;
    }

    body.light-mode .confidence-bar {
      background: rgba(0, 0, 0, 0.1);
    }

    .confidence-fill {
      height: 100%;
      background: linear-gradient(90deg, rgba(110, 190, 130, 0.8), rgba(110, 190, 130, 0.9));
      transition: width 0.5s ease, background 0.5s ease;
      border-radius: 4px;
    }

    .confidence-fill.medium {
      background: linear-gradient(90deg, rgba(255, 180, 100, 0.8), rgba(255, 180, 100, 0.9));
    }

    .confidence-fill.low {
      background: linear-gradient(90deg, rgba(230, 100, 120, 0.8), rgba(230, 100, 120, 0.9));
    }

    body.light-mode .confidence-fill {
      background: linear-gradient(90deg, #48bb78, #38a169);
    }

    body.light-mode .confidence-fill.medium {
      background: linear-gradient(90deg, #f6ad55, #ed8936);
    }

    body.light-mode .confidence-fill.low {
      background: linear-gradient(90deg, #fc8181, #e53e3e);
    }

    .memory-stats {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      font-size: 0.85em;
      opacity: 0.8;
    }

    .stat {
      display: flex;
      justify-content: space-between;
    }

    .stat-value {
      font-weight: 600;
      opacity: 1;
    }

    .memory-actions {
      margin-top: 16px;
      padding-top: 16px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      gap: 8px;
    }

    body.light-mode .memory-actions {
      border-color: rgba(0, 0, 0, 0.1);
    }

    .memory-actions button {
      font-size: 0.85em;
      padding: 8px 16px;
    }

    .archived-badge {
      position: absolute;
      top: 12px;
      right: 12px;
      background: rgba(230, 100, 120, 0.9);
      color: white;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 0.75em;
      font-weight: 700;
      text-transform: uppercase;
    }

    .verification-needed {
      background: rgba(255, 180, 100, 0.2);
      border-left: 3px solid rgba(255, 180, 100, 0.6);
      padding: 12px;
      margin-top: 12px;
      border-radius: 4px;
      font-size: 0.9em;
    }

    body.light-mode .verification-needed {
      background: #fef3c7;
      border-color: #f59e0b;
      color: #92400e;
    }

    .legend {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(10px);
      padding: 25px;
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    body.light-mode .legend {
      background: rgba(255, 255, 255, 0.9);
      border-color: rgba(100, 150, 200, 0.2);
    }

    .legend h3 {
      margin-bottom: 15px;
      color: rgba(160, 200, 255, 0.95);
    }

    body.light-mode .legend h3 {
      color: #4a90e2;
    }

    .legend-item {
      display: flex;
      justify-content: space-between;
      padding: 10px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    body.light-mode .legend-item {
      border-color: rgba(0, 0, 0, 0.1);
    }

    .legend-item:last-child {
      border-bottom: none;
    }

    .legend-value {
      font-weight: 600;
    }

    .legend-value.high { color: rgba(150, 230, 170, 0.95); }
    .legend-value.medium { color: rgba(255, 200, 140, 0.95); }
    .legend-value.low { color: rgba(255, 150, 160, 0.95); }
    .legend-value.very-low { color: rgba(230, 100, 120, 0.95); }

    body.light-mode .legend-value.high { color: #48bb78; }
    body.light-mode .legend-value.medium { color: #f6ad55; }
    body.light-mode .legend-value.low { color: #fc8181; }
    body.light-mode .legend-value.very-low { color: #e53e3e; }

    footer {
      text-align: center;
      margin-top: 40px;
      opacity: 0.6;
      font-size: 0.9em;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .decaying {
      animation: pulse 1s ease-in-out;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <button class="theme-toggle" onclick="toggleTheme()">‚òÄÔ∏è Light Mode</button>
      <h1>üß† AI Memory Decay</h1>
      <p class="subtitle">Watch memories fade over time using the Ebbinghaus forgetting curve</p>
    </header>

    <div class="intro">
      <h2>How It Works</h2>
      <p><strong>Most AI assistants treat memory like a filing cabinet</strong> ‚Äì everything stored has equal validity forever. That's not how human memory works.</p>
      <p><strong>This system uses the Ebbinghaus forgetting curve</strong> to model how memories naturally decay over time. Memories lose confidence unless they're reinforced through repeated access.</p>
      <p>Click <strong>"Advance 24 Hours"</strong> to watch memories fade. Click <strong>"Reinforce"</strong> to strengthen a memory and make it more durable.</p>
    </div>

    <div class="controls">
      <button onclick="advanceTime(1)">‚è© Advance 24 Hours</button>
      <button onclick="advanceTime(7)">‚è©‚è© Advance 1 Week</button>
      <button onclick="reset()">üîÑ Reset Demo</button>
      <div class="time-display">Day <span id="current-day">0</span></div>
    </div>

    <div class="memories-grid" id="memories-grid"></div>

    <div class="legend">
      <h3>Confidence Thresholds</h3>
      <div class="legend-item">
        <span>‚â• 70%</span>
        <span class="legend-value high">High - Use freely</span>
      </div>
      <div class="legend-item">
        <span>50% - 70%</span>
        <span class="legend-value medium">Medium - Use with caution</span>
      </div>
      <div class="legend-item">
        <span>30% - 50%</span>
        <span class="legend-value low">Low - Verify before using</span>
      </div>
      <div class="legend-item">
        <span>< 30%</span>
        <span class="legend-value very-low">Very Low - Archived</span>
      </div>
    </div>

    <footer>
      <p>Built with the Ebbinghaus forgetting curve ‚Ä¢ Memories decay naturally, reinforcement makes them durable</p>
    </footer>
  </div>

  <script>
    // Memory decay system based on Ebbinghaus forgetting curve
    const DECAY_RATES = {
      fact: 0.01,        // Very stable
      preference: 0.05,  // Moderately stable
      goal: 0.15,        // Changes regularly
      event: 0.25,       // Fades over time
      context: 0.60      // Very transient
    };

    let currentDay = 0;
    let memories = [];

    function initMemories() {
      const now = new Date();
      memories = [
        {
          id: 1,
          type: 'fact',
          content: 'User lives in Seattle',
          initial_confidence: 0.95,
          confidence: 0.95,
          decay_rate: DECAY_RATES.fact,
          reinforcement_count: 10,
          last_reinforced: new Date(now - 24 * 60 * 60 * 1000),
          created_at: new Date(now - 30 * 24 * 60 * 60 * 1000)
        },
        {
          id: 2,
          type: 'preference',
          content: 'User prefers afternoon coffee breaks',
          initial_confidence: 0.85,
          confidence: 0.85,
          decay_rate: DECAY_RATES.preference,
          reinforcement_count: 2,
          last_reinforced: new Date(now - 24 * 60 * 60 * 1000),
          created_at: new Date(now - 20 * 24 * 60 * 60 * 1000)
        },
        {
          id: 3,
          type: 'goal',
          content: 'User wants to run a marathon',
          initial_confidence: 0.80,
          confidence: 0.70,
          decay_rate: DECAY_RATES.goal,
          reinforcement_count: 1,
          last_reinforced: new Date(now - 20 * 24 * 60 * 60 * 1000),
          created_at: new Date(now - 25 * 24 * 60 * 60 * 1000)
        },
        {
          id: 4,
          type: 'context',
          content: 'User was debugging a React component',
          initial_confidence: 0.85,
          confidence: 0.45,
          decay_rate: DECAY_RATES.context,
          reinforcement_count: 0,
          last_reinforced: new Date(now - 48 * 60 * 60 * 1000),
          created_at: new Date(now - 48 * 60 * 60 * 1000)
        },
        {
          id: 5,
          type: 'event',
          content: 'User attended a tech conference in Austin',
          initial_confidence: 0.85,
          confidence: 0.60,
          decay_rate: DECAY_RATES.event,
          reinforcement_count: 0,
          last_reinforced: new Date(now - 25 * 24 * 60 * 60 * 1000),
          created_at: new Date(now - 25 * 24 * 60 * 60 * 1000)
        }
      ];
    }

    function calculateConfidence(memory) {
      const hoursSinceReinforced = (Date.now() - memory.last_reinforced.getTime()) / (1000 * 60 * 60);
      const adjustedDecayRate = memory.decay_rate / (1 + 0.3 * memory.reinforcement_count);
      const confidence = memory.initial_confidence * Math.exp(-adjustedDecayRate * hoursSinceReinforced);
      return Math.max(0, Math.min(1, confidence));
    }

    function advanceTime(days) {
      currentDay += days;

      memories.forEach(memory => {
        memory.last_reinforced = new Date(memory.last_reinforced.getTime());
        memory.confidence = calculateConfidence(memory);
        memory.archived = memory.confidence < 0.3;
      });

      document.getElementById('current-day').textContent = currentDay;
      renderMemories();
    }

    function reinforceMemory(id) {
      const memory = memories.find(m => m.id === id);
      if (!memory) return;

      memory.reinforcement_count++;
      memory.last_reinforced = new Date();
      memory.confidence = Math.min(0.95, memory.confidence + 0.1);
      memory.initial_confidence = Math.max(memory.initial_confidence, memory.confidence);
      memory.archived = false;

      renderMemories();
    }

    function renderMemories() {
      const grid = document.getElementById('memories-grid');
      grid.innerHTML = '';

      memories.forEach(memory => {
        const card = document.createElement('div');
        card.className = 'memory-card';

        const confidencePercent = (memory.confidence * 100).toFixed(0);
        let confidenceClass = 'high';
        if (memory.confidence < 0.7) confidenceClass = 'medium';
        if (memory.confidence < 0.5) confidenceClass = 'low';

        const needsVerification = memory.confidence >= 0.3 && memory.confidence < 0.5;

        card.innerHTML = `
          ${memory.archived ? '<div class="archived-badge">Archived</div>' : ''}
          <div class="memory-type type-${memory.type}">${memory.type}</div>
          <div class="memory-content">${memory.content}</div>
          <div class="confidence-bar">
            <div class="confidence-fill ${confidenceClass}" style="width: ${confidencePercent}%"></div>
          </div>
          <div class="memory-stats">
            <div class="stat">
              <span>Confidence:</span>
              <span class="stat-value">${confidencePercent}%</span>
            </div>
            <div class="stat">
              <span>Initial:</span>
              <span class="stat-value">${(memory.initial_confidence * 100).toFixed(0)}%</span>
            </div>
            <div class="stat">
              <span>Decay Rate:</span>
              <span class="stat-value">${memory.decay_rate.toFixed(2)}</span>
            </div>
            <div class="stat">
              <span>Reinforcements:</span>
              <span class="stat-value">${memory.reinforcement_count}</span>
            </div>
          </div>
          ${needsVerification ? '<div class="verification-needed">‚ö†Ô∏è AI should verify: "I recall ' + memory.content.toLowerCase().replace('user ', 'you ') + ' ‚Äî still true?"</div>' : ''}
          <div class="memory-actions">
            <button class="secondary" onclick="reinforceMemory(${memory.id})">üí™ Reinforce</button>
          </div>
        `;

        grid.appendChild(card);
      });
    }

    function toggleTheme() {
      document.body.classList.toggle('light-mode');
      const btn = document.querySelector('.theme-toggle');
      btn.textContent = document.body.classList.contains('light-mode') ? 'üåô Dark Mode' : '‚òÄÔ∏è Light Mode';
    }

    function reset() {
      currentDay = 0;
      document.getElementById('current-day').textContent = '0';
      initMemories();
      renderMemories();
    }

    // Initialize on load
    initMemories();
    renderMemories();
  </script>
</body>
</html>
